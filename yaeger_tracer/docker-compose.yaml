version: "3.9"

services:
  # test-jaeger-app:
  #   image: portainer/portainer-ce:latest
  #   container_name: portainer
  #   restart: unless-stopped
  #   security_opt:
  #     - no-new-privileges:true
  #   volumes:
  #     - /etc/localtime:/etc/localtime:ro
  #     - /var/run/docker.sock:/var/run/docker.sock:ro
  #     - ./portainer-data:/data
  #   ports:
  #     - 9000:9000

  jaeger-agent:
    image: jaegertracing/jaeger-agent:1.53
    container_name: jaeger-collector
    environment:
      - SPAN_STORAGE_TYPE=cassandra
    ports:
      - 6831:6831
      - 6832:6832
      - 5778:5778
      - 5775:5775
    restart: always
    networks:
      - dev-net
    depends_on:
      - cpg-postgres-db

  jaeger-collector:
    image: jaegertracing/jaeger-collector:1.53
    container_name: jaeger-collector
    environment:
      - SPAN_STORAGE_TYPE=cassandra
    ports:
      - 16686:16686
      - 14269:14269    
    restart: always
    networks:
      - dev-net
    depends_on:
      - cpg-postgres-db

networks: 
  dev-net:
    name: dev-net